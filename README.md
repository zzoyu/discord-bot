# Discord Bot

Node.js 기반의 간단한 디스코드 봇입니다.

# 사용법

봇을 특정 URL을 통하여 원하는 서버에 초대하고, 프로그램을 실행합니다. 토큰 및 관련 API URL은 .env파일에 저장되어 있으며, 저장소에 포함되지 않습니다.
필요한 권한은 메시지 작성, 슬래시 명령어 입니다.

# 명령어 목록

## /스팀

인기 스팀 할인 게임들을 표시합니다. 외부 사이트의 API를 우회하여 호출하였습니다.

1. 특정 사이트의 인기 게임 목록 API를 호출합니다.
2. 필요한 필드값을 취합니다.
3. 해당 정보를 embed 형태로 표시합니다.

## /뽐뿌

최근 뽐뿌 사이트에서 인기 게시글 중 첫 페이지의 12시간 내 항목들만 크롤링하여 표시합니다.

1. 사이트의 내용을 GET 요청합니다.
2. 한글이 깨지지 않도록 인코딩을 맞춥니다.
3. jsdom을 이용해 DOM을 생성합니다.
4. 필요한 엘레먼트를 검색 및 추출하여 원하는 정보를 가져옵니다.
5. 해당 정보를 embed형태로 표시합니다.

## /소라고동 "message", /k-소라고동 "message"

KoGPT, OpenAI Codex 모델의 API와 연결하여 스폰지밥의 마법의 소라고동을 패러디하였습니다. 좀 더 프롬프트 튜닝이 필요할 것으로 보입니다.

1. 옵션으로 받는 메시지는 prompt값이 될 부분입니다.
2. 공개된 API로 해당 프롬프트를 포함한 POST 요청을 보냅니다.
3. 답변이 오는 동안 응답을 defer 처리하여 타임아웃되지 않도록 합니다.
4. 답변이 오면 embed 형태로 표시합니다.
